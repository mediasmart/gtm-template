___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Mediasmart Conversion Tracking",
  "brand": {
    "id": "mediasmart",
    "displayName": "Mediasmart",
    "logo": "",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "Mediasmart conversion tracking allows tracking conversions on programmatic campaigns that run on mediasmart’s DSP",
  "categories": [
    "CONVERSIONS",
    "ADVERTISING",
    "ANALYTICS"
  ],
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "LABEL",
    "name": "reminder",
    "displayName": "For accurate tracking, &msxt=%msxt% (or ?msxt=%msxt%) is needed to be added to the click tracker and made transferrable to the landing page"
  },
  {
    "type": "TEXT",
    "name": "organizationId",
    "displayName": "Advertiser ID or Organization ID",
    "simpleValueType": true,
    "alwaysInSummary": true,
    "help": "Enter your Advertiser Id or Event ID from your campaign configuration for advertiser level tracking. Legacy organization level tracking integrations can use Organization ID instead. Find your Organization ID inside console.mediasmart.io under the organizations section , in the \"General\" tab of your organization",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      },
      {
        "type": "REGEX",
        "errorMessage": "The value is not a mediasmart Advertiser or Organization ID. \nFind your Organization ID in mediasmart console under your organization section",
        "args": [
          "[a-zA-Z0-9-_]+"
        ]
      }
    ],
    "valueHint": "Get your id from console.mediasmart.io"
  },
  {
    "type": "TEXT",
    "name": "eventNumber",
    "displayName": "event Number",
    "simpleValueType": true,
    "alwaysInSummary": true,
    "defaultValue": 1,
    "help": "Conversion number from 1 to 5",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      },
      {
        "type": "REGEX",
        "args": [
          "[1-5]"
        ],
        "errorMessage": "The value must be a number between 1 and 5"
      }
    ]
  }
]


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "get_referrer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queriesAllowed",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_pixel",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://3ma79ae7cua.com/"
              },
              {
                "type": 1,
                "string": "https://ads.mediasmart.es/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_url",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urlParts",
          "value": {
            "type": 1,
            "string": "any"
          }
        },
        {
          "key": "queriesAllowed",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "isRequired": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const sendPixel = require('sendPixel');
const encodeUriComponent = require('encodeUriComponent');
const getUrl = require('getUrl');
const getReferrerUrl = require('getReferrerUrl');
// variable capture
let orgId = data.organizationId;
let eventNumber = data.eventNumber;
// casting to string
orgId = '' + orgId;
eventNumber = '' + eventNumber;
// url parameters
let udid;
let eventId;
let msxt;


// Detection of parameters in url

const msParamReader = function(currentUrl, parameterName, valuePrefix) {
	if (!currentUrl) {
		currentUrl = '';
	}
	let indexStart = currentUrl.indexOf('' + parameterName + '=');
	if (indexStart == -1) {
		indexStart = currentUrl.indexOf('' + valuePrefix);
	}
	let result = indexStart != -1 ? currentUrl.substring(indexStart) : '';
	let indexEnd = result.indexOf('&');
	if(indexEnd != -1) {
	  result = result.substring(0, indexEnd);
	}
	result = result.replace('' + parameterName + '=','');
	result = result.replace('' + valuePrefix + ':','');
  return result;
};

if (!msxt)
{
  msxt = msParamReader(getUrl(), 'msxt' ,'msxt');
}

if (!msxt)
{
  msxt = msParamReader(getReferrerUrl(), 'msxt' ,'msxt');
}

if (!udid)
{
	udid = msParamReader(getUrl(), 'udid' ,'msck');
}

if (!udid)
{
	udid = msParamReader(getReferrerUrl(), 'udid' ,'msck');
}

if (!eventId)
{
	eventId = msParamReader(getUrl(), 'eventid' ,'msev');
}

if (!eventId)
{
	eventId = msParamReader(getReferrerUrl(), 'eventid' ,'msev');
}

let url = '';
if (orgId.indexOf('-')!=-1) {
	url = 'https://3ma79ae7cua.com/m/open?id=' + encodeUriComponent(orgId) + '&ms_event_num=' + encodeUriComponent(eventNumber);
} else {
	url = 'https://3ma79ae7cua.com/m/open?orgid=' + encodeUriComponent(orgId) + '&ms_event_num=' + encodeUriComponent(eventNumber);
	if (eventId) {
		url = url + '&id=' + encodeUriComponent(eventId);
 }
}
if (udid) {
	url = url + '&udid=' + encodeUriComponent(udid);
}
if (msxt) {
	url = url + '&msxt=' + encodeUriComponent(msxt);
}
sendPixel(url, data.gtmOnSuccess, data.gtmOnSuccess);


___NOTES___

Created on 23/10/2019 12:46:48
